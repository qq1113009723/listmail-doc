# 概念

## 订阅者

订阅者是通过电子邮件地址和姓名识别的收件人。订阅者接收从 stmails 发送的电子邮件。一个订阅者可以被添加到任意数量的列表中。不属于任何列表的订阅者被视为*孤立*记录。

### 属性

属性是附加到订阅者电子邮件和姓名之外的任意属性。它们以 JSON 映射的形式表示。并非所有订阅者都需要具有相同的属性。可以根据订阅者的属性对其进行[查询和细分](querying-and-segmentation.md)到列表中，并且这些属性可以插入到发送给他们的电子邮件中。例如：

```json
{
  "city": "Bengaluru",
  "likes_tea": true,
  "spoken_languages": ["English", "Malayalam"],
  "projects": 3,
  "stack": {
    "frameworks": ["echo", "go"],
    "languages": ["go", "python"],
    "preferred_language": "go"
  }
}
```

### 订阅状态

订阅者可以被添加到一个或多个列表中，每个这样的关系都可以具有以下状态之一。

| 状态           | 说明                                                                       |
| ------------- | --------------------------------------------------------------------------------- |
| `unconfirmed` | 订阅者被直接添加到列表中，没有经过他们的明确确认。尽管如此，订阅者仍将收到发送到单次确认活动的活动邮件。 |
| `confirmed`   | 订阅者通过点击确认电子邮件中的"接受"来确认其订阅。只有确认列表中的已确认订阅者才会收到发送到该列表的活动邮件。                                       |
| `unsubscribed` | 订阅者已从列表中取消订阅，将不会收到发送到该列表的任何活动邮件。

### 细分

细分是根据特定条件将订阅者群体分成更小、更有针对性的组的过程。这个过程主要基于订阅者的属性数据，使您能够：

1. **精准营销**：向特定群体发送定制化的内容
2. **提高参与度**：通过发送相关度更高的内容提高邮件打开率和点击率
3. **优化资源**：避免向不相关的订阅者发送邮件，节省资源

#### 细分示例

以下是一些常见的细分场景：

1. **地理位置细分**
   - 向特定城市的订阅者发送本地活动信息
   - 根据不同时区发送促销活动

2. **行为细分**
   - 向最近购买过的客户发送相关产品推荐
   - 向长期未互动的订阅者发送重新激活邮件

3. **人口统计细分**
   - 根据年龄、性别等特征发送定制化内容
   - 针对不同职业群体发送相关行业信息

4. **兴趣细分**
   - 根据订阅者的兴趣标签发送相关内容
   - 基于历史互动数据推荐相似内容

#### 如何使用细分

在 stmails 中，您可以通过以下方式使用细分功能：

1. 使用查询语言根据属性创建细分
2. 将细分结果保存为新的列表
3. 在发送活动时选择特定的细分列表

例如，如果您想向北京的订阅者发送本地活动信息，可以这样查询：
```sql
city = '北京'
```

或者，如果您想向最近30天内购买过的客户发送促销信息：
```sql
last_purchase_date > '2024-01-01'
```

[了解更多关于查询和细分的详细信息](querying-and-segmentation.md)

## 列表

列表（或*邮件列表*）是在一个名称下分组的订阅者集合，例如*客户*。列表用于组织订阅者并向特定组发送电子邮件。列表可以是单次确认或双重确认。添加到双重确认列表的订阅者必须通过点击他们收到的确认电子邮件来明确接受订阅。在此之前，他们不会收到活动邮件。

## 活动

活动是发送到一个或多个列表的电子邮件（或任何其他类型的消息）。

## 事务性消息

事务性消息是使用事务性消息 API 发送给订阅者的任意消息。例如，注册服务时的欢迎电子邮件；购买商品时的订单确认电子邮件；用户启动在线账户恢复过程时的密码重置电子邮件。

## 模板

模板是一种可重用的 HTML 设计，可用于活动和发送任意事务性消息。最常见的是，模板具有标准的页眉和页脚区域，包含徽标和品牌元素，活动内容插入在中间。stmails 支持 [Go 模板](https://gowebexamples.com/templates/) 表达式，让您可以创建强大的动态 HTML 模板。[了解更多](templating.md)。

## 消息发送器

除了默认的 SMTP 电子邮件后端外，stmails 还支持多个自定义消息发送后端，不仅支持电子邮件活动，还支持任意消息活动，如 SMS、FCM 通知等。*消息发送器*是一个 Web 服务，它接受作为 JSON 请求推送的活动消息，该服务可以将其作为 SMS、FCM 等广播。[了解更多](messengers.md)。

## 跟踪像素

跟踪像素是一个微小的、不可见的图像，插入到电子邮件正文中以跟踪电子邮件查看。这允许测量电子邮件的阅读率。虽然这在电子邮件活动中非常常见，但它涉及隐私问题，应该遵守 GDPR 等规则和法规。可以匿名跟踪阅读，而不会将电子邮件阅读与订阅者关联起来。

## 点击跟踪

可以跟踪电子邮件中发送的每个链接的点击。这允许测量电子邮件中链接的点击率。虽然这在电子邮件活动中非常常见，但它涉及隐私问题，应该遵守 GDPR 等规则和法规。可以匿名跟踪链接点击，而不会将电子邮件阅读与订阅者关联起来。

## 退信

当发送给收件人的电子邮件因多种原因之一而"退回"时，就会发生退信，包括收件人地址无效、他们的邮箱已满，或收件人的电子邮件服务提供商将电子邮件标记为垃圾邮件。stmails 可以自动处理发送到配置的 POP 邮箱的退信电子邮件，或通过 AWS SES 和 Sengrid 等 SMTP 电子邮件提供商的 API。根据设置，返回退信电子邮件的订阅者可以被自动加入黑名单或删除。[了解更多](bounces.md)。
